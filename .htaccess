# Mie Time - .htaccess (Minimal for Testing)

# Prevent directory listing
Options -Indexes

# Protect sensitive files
<FilesMatch "^(config\.php|\.htaccess)$">
    Order allow,deny
    Deny from all
</FilesMatch>

# Enable mod_rewrite IF available
# ...existing code...
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /workshop/mie-time/

# Skip real files and directories
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L]

# Auth routes
RewriteRule ^login$ pages/auth/login.php [L]
RewriteRule ^register$ pages/auth/register.php [L]
RewriteRule ^logout$ pages/auth/logout.php [L]

# Kedai routes
RewriteRule ^kedai$ pages/locations/list.php [L,QSA]
RewriteRule ^kedai/([0-9]+)$ pages/locations/detail.php?id=$1 [L,QSA]
RewriteRule ^kedai/add$ pages/locations/add.php [L]

# Reviews routes (support both plural and singular forms)
RewriteRule ^reviews/add/([0-9]+)$ pages/reviews/add.php?location_id=$1 [L,QSA]
RewriteRule ^reviews/add$ pages/reviews/add.php [L,QSA]
RewriteRule ^review/add/([0-9]+)$ pages/reviews/add.php?location_id=$1 [L,QSA]
RewriteRule ^review/add$ pages/reviews/add.php [L,QSA]

# User routes
RewriteRule ^dashboard$ pages/user/dashboard.php [L]
RewriteRule ^profile$ pages/user/profile.php [L]
RewriteRule ^badges$ pages/user/badges.php [L]
RewriteRule ^notifications$ pages/user/notification.php [L,QSA]

# Other routes
RewriteRule ^search$ pages/search/index.php [L,QSA]
RewriteRule ^leaderboard$ pages/leaderboard/index.php [L]
RewriteRule ^stats$ pages/stats/index.php [L]

# Admin routes (support /admin and /admin/{page})
RewriteRule ^admin$ admin/index.php [L]
RewriteRule ^admin/([A-Za-z0-9_-]+)$ admin/$1.php [L,QSA]

</IfModule>